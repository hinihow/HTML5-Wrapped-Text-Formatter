var submitToGoogleTrans=function(b){try{var a=b.source.value,a=a.trim();if(""===a)return!1;do a=a.split("\t").join(" ");while(-1<a.indexOf("  "));b.replace_fulltype.checked&&(a=a.split("\u2019").join("'"),a=a.split("\u201d").join('""'),a=a.split("\u201c").join('""'));if(b.trim_dash.checked){for(;-1<a.indexOf(" \n");)a=a.split(" \n").join("\n");a=a.split("-\n").join("")}b.trim_nl.checked&&(a=a.replace(/\n[\u4e00-\u9fa5]/g,function(a){return a.split("\n").join("")}),a=a.split("\n").join(" "));if(b.sentence_nl.checked)var a=
a.split(". ").join(". \n\n"),a=a.split("\u2022 ").join("\n\n\u2022 "),a=a.replace(/p\. \n\n\d/g,function(a){return a.split("\n").join("")}),c=function(a){return a.split("\n").join("")},a=a.replace(/e\.g\. \n\n[^A-Z]/g,c),a=a.replace(/i\.e\. \n\n[^A-Z]/g,c),a=a.replace(/et al\. \n\n[^A-Z]/g,c),a=a.replace(/etc\. \n\n[^A-Z]/g,c),a=a.split("\u3002").join("\u3002 \n\n"),a=a.split('." ').join('." \n\n'),a=a.split('." \n\n(').join('." ('),a=a.split("\u3002\u300d ").join("\u3002\u300d \n\n"),a=a.split(".' ").join(".' \n\n"),
a=a.split("; ").join("; \n\n"),a=a.replace(/\d; \n\n/g,function(a){return a.split("\n").join("")}),a=a.split("\uff1b ").join("\uff1b \n\n"),a=_googleTransUtils.str_replace("\uff1b","\uff1b\n\n",a),a=_googleTransUtils.str_replace("\uff08 "," (",a),a=_googleTransUtils.str_replace("  ( "," (",a),a=_googleTransUtils.str_replace(" \uff09",") ",a),a=_googleTransUtils.str_replace(")  ",") ",a),a=a.split("\n ").join("\n"),a=a.replace(/[0-9]+\. \n\n[A-Z]/g,function(a){return"\n\n"+a.split("\n").join("")});
b.trim_citation.checked&&(a=a.replace(/\n\d+$/g,""),a=a.replace(/\n\d+ /g,"\n"));for(;-1<a.indexOf("  ");)a=a.split("  ").join(" ");for(;-1<a.indexOf("\n ");)a=a.split("\n ").join("\n");for(;-1<a.indexOf(". \n\n.");)a=a.split(". \n\n.").join("..");for(;-1<a.indexOf("\n\n\n\n");)a=a.split("\n\n\n\n").join("\n\n");a=a.replace(/[A-Z]\. \n\n/g,function(a){return a.split("\n").join("")});a=$.trim(a);if("submit_authors"===$(b).attr("submit_type")){var a=a.substr(0,a.indexOf(" (")).trim(),d=a.split(","),
c=[];console.log(d);var l=2;1===d.length%2&&(l=1);for(var h=0,r=d.length;h<r;h+=l){var e=d[h];2===l&&(e=e+", "+d[h+1]);console.log(e);var e=e.split("&").join(""),m=e.indexOf(", ");if(-1<m)var t=e.substr(0,m).trim(),e=e.slice(m+1,e.length).trim()+" "+t;c.push(e)}a=c.join("\n")}var a=a.replace(/\[.*?\]/g,""),a=a.replace(/\(.*?\)/g,""),d=a=a.replace(/\{.*?\}/g,""),a=encodeURIComponent(a),p="https://translate.google.com.tw/#"+b.source_lang.value+"/"+b.target_lang.value+"/",a=p+a,f=b.output_style.value;
if(b.test_output.checked){var u=$(".google_trans_20140526 .test-output").show(),g=$("<div class='test-div panel panel-success'></div>").prependTo(u),n=new Date,v=n.getHours(),w=n.getMinutes(),x=n.getSeconds(),f=d,f=_googleTransUtils.str_replace("\n"," ",f);$("<div class='animated panel-heading togglable'></div>").html('<span class="glyphicon glyphicon-chevron-up" style="float:right"></span><span class="glyphicon glyphicon-chevron-down" style="float:right"></span><div class=\'heading-text\'><strong>'+
v+":"+w+":"+x+"</strong> "+f+"</div> ").click(function(){_googleTransUtils.toggle_panel(this)}).appendTo(g);_googleTransUtils.toggle_panel($(".google_trans_20140526 .input-div .panel-heading.togglable"));var y=$("<button type='button'></button>").html("\u7ffb\u8b6f").attr("pulipuli_base_url",p).click(function(){var a=$(this).attr("pulipuli_base_url")+$(this).next().val();window.open(a,"_blank","height=600,width=800,scrollbars=no")}).appendTo(g),k=$("<textarea class='animated source panel-body'></textarea>").val(d).click(function(){this.select()}).appendTo(g),
z=$("<textarea class='animated source panel-body note'></textarea>").click(function(){this.select()}).appendTo(g);"submit_authors"===$(b).attr("submit_type")&&g.addClass("submit_authors");var A=function(){$(".input-div .panel-body").slideUp()};$(function(){k.autosize();z.autosize();k.focus();k.click();k.click(A);$(".google-trans-title").hide()});b.window_open_output.checked&&setTimeout(function(){return y.click()},500)}else if("blank"===f)window.open(a,"_blank");else if("iframe"===f){var B=b.subject.value,
C=(new Date).getTime();_googleTransUtils.create_iframe(a,C+" "+B).prependTo(".google_trans_20140526 .output")}}catch(q){console.log(q)}$(b.source).val("");return!1};$(function(){$("#submitToGoogleTransForm").submit(function(b){return submitToGoogleTrans(this,b)});$("#submitToGoogleTransForm :submit").click(function(){$("#submitToGoogleTransForm").attr("submit_type",this.name)})});
var _googleTransUtils={str_replace:function(b,a,c,d){return c.split(b).join(a)},trim_nl:function(b){return this.str_replace("\n","",b)},trim_nl_dash:function(b){return this.str_replace("-\n","",b)},toggle_panel:function(b,a){b=$(b);var c=b.nextAll();void 0===a&&(a=0<c.filter(":visible").length);a?c.slideUp(function(){b.addClass("heading_hidden")}):c.slideDown(function(){b.removeClass("heading_hidden")})},create_iframe:function(b,a){var c=$("<div></div>").addClass("panel panel-success"),d=$("<div></div>").addClass("panel-heading togglable").appendTo(c).click(function(){_googleTransUtils.toggle_panel(this)});
$("<div></div>").addClass("panel-title").html(a).appendTo(d);d=$("<div></div>").addClass("panel-body").appendTo(c);$('<iframe src="'+b+'&output=embed" class="iframe" />').appendTo(d);return c}};
$(function(){var b=$(".input-textarea").focus(),a=function(){var a=window.innerHeight,a=a-300;30>a&&(a=30);b.height(a)};a();$(window).resize(function(){a()});b.keydown(function(a){a.ctrlKey&&13===a.keyCode?$(".google_trans_20140526 form .submit_trans").click():a.altKey&&13===a.keyCode&&$(".google_trans_20140526 form .submit_authors").click()});var c;$(window).blur(function(){c=setTimeout(function(){var a=$(".input-div .panel-heading.togglable");_googleTransUtils.toggle_panel(a,!1);var a=$('.input-div [name="source"]'),
b=a.val();""!==b&&"\n"!==b.substr(b.length-1,1)&&a.val(b+"\n")},3E3)});$(window).focus(function(){clearTimeout(c)});$(".output-container .page-header").click(function(){$(".input-div .panel-heading.togglable").click()})});
